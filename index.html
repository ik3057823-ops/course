<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Ethics & Integrity — Course Overview</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <style>
    :root{
      --bg: #ffffff;
      --card: #ffffff;
      --soft: #f8fafc;
      --text: #0f172a;      /* slate-900 */
      --muted: #475569;     /* slate-600 */
      --border: #e5e7eb;    /* gray-200 */
      --accent: #2563eb;    /* blue-600 */
      --accent-2: #7c3aed;  /* violet-600 */
      --success: #16a34a;
      --warning: #d97706;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(2,6,23,.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
      color:var(--text);
      background: var(--bg);
      letter-spacing:.2px;
    }

    /* Header */
    header{
      position:sticky; top:0; z-index:10;
      background:#fff;
      border-bottom:1px solid var(--border);
    }
    .wrap{max-width:1200px; margin:0 auto; padding:16px 20px}
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:8px 20px 0;
      max-width:1200px; margin:0 auto;
    }
    .back-link{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px; border:1px solid var(--border);
      background:#fff; text-decoration:none; color:var(--text); font-weight:600;
      box-shadow: var(--shadow);
    }
    .brand{display:flex; align-items:flex-start; justify-content:space-between; gap:16px}
    h1{font-size:22px; margin:0 0 6px}
    .muted{color:var(--muted)}
    .overall{
      min-width:260px; text-align:right;
    }
    .overall .label{font-size:12px; color:var(--muted); margin-bottom:6px}
    .bar{height:8px; width:260px; background: var(--border); border-radius:999px; overflow:hidden}
    .bar > i{display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width .25s ease}

    /* Hero: first-lesson teaser */
    .hero{padding:8px 20px 12px; max-width:1200px; margin:0 auto}
    .first-callout{
      border:1px solid var(--border); border-radius: var(--radius);
      background: #fff; padding:16px; display:flex; align-items:center; justify-content:space-between; gap:18px;
      box-shadow: var(--shadow);
    }
    .first-title{font-size:18px; font-weight:700; margin:0}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:999px; border:1px solid var(--border);
      background:#fff; color:var(--text); text-decoration:none; font-weight:700; cursor:pointer;
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: var(--shadow);
    }
    .btn:hover{ transform: translateY(-1px) }
    .btn.primary{
      color:#fff; background: linear-gradient(135deg, var(--accent), var(--accent-2));
      border-color: transparent;
    }
    .btn.small{padding:8px 12px; font-size:14px}

    /* Layout */
    main{max-width:1200px; margin:0 auto; padding:16px 20px 80px}
    #menu{position:relative; top:-80px} /* allow anchor jump under sticky header */

    .grid{
      display:grid; gap:16px;
      grid-template-columns: repeat(12, 1fr);
    }
    @media (max-width: 1050px){ .grid{grid-template-columns: repeat(8, 1fr)} }
    @media (max-width: 720px){ .grid{grid-template-columns: repeat(4, 1fr)} }

    /* Card */
    .card{
      grid-column: span 4;
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      display:flex; flex-direction:column; min-height: 340px;
      transition: transform .12s ease;
    }
    .card:hover{ transform: translateY(-3px) }

    .cover{
      position:relative; height:140px; overflow:hidden;
    }
    /* Gradient covers (no photos) */
    .grad-1{ background: linear-gradient(135deg, #dbeafe, #ede9fe) }
    .grad-2{ background: linear-gradient(135deg, #fee2e2, #ffedd5) }
    .grad-3{ background: linear-gradient(135deg, #dcfce7, #dbeafe) }
    .grad-4{ background: linear-gradient(135deg, #fce7f3, #fae8ff) }
    .grad-5{ background: linear-gradient(135deg, #fef3c7, #fde68a) }
    .grad-6{ background: linear-gradient(135deg, #e0f2fe, #fef9c3) }
    .grad-7{ background: linear-gradient(135deg, #ede9fe, #cffafe) }
    .grad-8{ background: linear-gradient(135deg, #ffe4e6, #e9d5ff) }
    .grad-9{ background: linear-gradient(135deg, #ddd6fe, #bae6fd) }
    .grad-10{ background: linear-gradient(135deg, #fef9c3, #dcfce7) }

    .badge{
      position:absolute; top:12px; left:12px;
      padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; letter-spacing:.3px;
      background:#fff; border:1px solid var(--border); color: var(--muted);
    }

    .body{padding:16px; display:flex; flex-direction:column; gap:10px; flex:1}
    .title{font-weight:800; font-size:18px; margin:0}
    .desc{color:var(--muted); font-size:14px; line-height:1.55; flex:1}

    .row{display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:6px; font-size:12px; padding:6px 10px;
      border-radius:999px; border:1px solid var(--border); color:var(--muted);
      background: #fff;
    }
    .actions{display:flex; gap:8px; align-items:center}

    /* Inline progress control (replaces "Mark complete") */
    .progress-wrap{display:flex; align-items:center; gap:12px; width:100%}
    .progress{flex:1; height:8px; background: var(--border); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .2s ease}
    .status-select{
      border:1px solid var(--border); border-radius:999px; background:#fff; padding:6px 10px; font-size:12px; color:var(--text)
    }

    .footer{
      display:flex; justify-content:space-between; align-items:center; gap:10px; padding:16px;
      border-top:1px dashed var(--border); margin-top:16px;
    }
    .reset{cursor:pointer}

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <!-- 1) Back to menu button ABOVE the course title -->
    <div class="topbar">
      <a class="back-link" href="#menu" aria-label="Back to menu">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Back to menu
      </a>
      <div style="height:1px"></div>
    </div>

    <div class="wrap brand" role="navigation" aria-label="Top Navigation">
      <div>
        <h1>AI Ethics &amp; Integrity</h1>
        <div class="muted">10-lesson micro-course • clear step-by-step order</div>
      </div>
      <div class="overall" aria-label="Overall progress">
        <div class="label"><span id="overallText">0/10 complete</span></div>
        <div class="bar" aria-hidden="true"><i id="overallBar" style="width:0%"></i></div>
      </div>
    </div>

    <!-- 2) Replace hero text with FIRST LESSON title + Start button -->
    <div class="hero">
      <div class="first-callout">
        <div>
          <div class="muted" style="font-size:12px; font-weight:700; letter-spacing:.4px">Start here</div>
          <p class="first-title" id="firstLessonTitle">Lesson 01 — Welcome &amp; Orientation</p>
        </div>
        <button id="startFirst" class="btn primary" aria-label="Start Lesson 1">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M8 5v14l11-7-11-7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
          Start
        </button>
      </div>
    </div>
  </header>

  <main>
    <span id="menu"></span>
    <section class="grid" id="lessonGrid" aria-label="Course Lessons"></section>

    <div class="footer wrap">
      <div class="muted">Reset your local progress on this device</div>
      <button class="btn small reset" id="resetBtn" aria-label="Reset all progress">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12a9 9 0 1 0 3-6.708M3 4v4h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        Reset progress
      </button>
    </div>
  </main>

  <script>
    // ---------------- Course data (clear sequence & plain-language titles) ----------------
    const COURSE_KEY = "aie_ethics_integrity_v2";
    const lessons = [
      { id:1,  title:"Welcome & How this course works", time:10,
        summary:"What you’ll learn, how to track progress, and tips for success." },
      { id:2,  title:"AI basics: What it is (and isn’t)", time:15,
        summary:"Simple definitions and examples you’ll use throughout the course." },
      { id:3,  title:"Ethics basics: Easy decision frameworks", time:20,
        summary:"A quick way to weigh choices: fairness, duty, and doing the least harm." },
      { id:4,  title:"Bias & fairness: Spot it and reduce it", time:25,
        summary:"Where bias comes from and steps you can take to make work fairer." },
      { id:5,  title:"Privacy & consent: Do and don’t", time:25,
        summary:"When to share data, when not to, and how to protect people’s info." },
      { id:6,  title:"Academic integrity with AI", time:20,
        summary:"Original work, acceptable help, and how to give proper credit." },
      { id:7,  title:"Responsible prompting & attribution", time:20,
        summary:"Write clear prompts, check results, and acknowledge tools & sources." },
      { id:8,  title:"Law in plain language: IP, licensing & GDPR", time:30,
        summary:"Key legal ideas to keep you safe when creating and sharing work." },
      { id:9,  title:"Be open: Transparency & disclosure", time:20,
        summary:"When to tell others you used AI and how to build trust." },
      { id:10, title:"Capstone: Case analysis & integrity pledge", time:40,
        summary:"Apply what you learned to a real scenario and draft your pledge." }
    ];

    // ---------------- State & persistence ----------------
    const storage = {
      get () {
        const raw = localStorage.getItem(COURSE_KEY);
        if (!raw) return { status:{}, lastLessonId:null };
        try { return JSON.parse(raw); } catch { return { status:{}, lastLessonId:null }; }
      },
      set (data) { localStorage.setItem(COURSE_KEY, JSON.stringify(data)); },
      reset () { localStorage.removeItem(COURSE_KEY); }
    };
    const state = storage.get();

    // ---------------- Utilities ----------------
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
    const pctFor = (s)=> s==="completed" ? 100 : s==="in_progress" ? 50 : 0;

    const completedCount = () => lessons.filter(l => state.status[l.id]==="completed").length;
    const updateOverall = () => {
      const done = completedCount();
      const pct = Math.round((done/lessons.length)*100);
      $("#overallText").textContent = `${done}/${lessons.length} complete`;
      $("#overallBar").style.width = pct + "%";
      document.title = `AI Ethics & Integrity — ${done}/${lessons.length} complete`;
    };

    const setStatus = (lessonId, status) => {
      state.status[lessonId] = status;
      storage.set(state);
      updateOverall();
    };

    // ---------------- Render ----------------
    const grid = $("#lessonGrid");
    const gradientClass = (i)=> `grad-${((i-1)%10)+1}`;

    const createCard = (lesson, index) => {
      const art = document.createElement("article");
      art.className = "card";
      art.id = `lesson-${lesson.id}`;
      art.setAttribute("data-lesson-id", lesson.id);

      const status = state.status[lesson.id] || "not_started";
      const progressPct = pctFor(status);

      art.innerHTML = `
        <div class="cover ${gradientClass(index+1)}">
          <div class="badge">Lesson ${String(lesson.id).padStart(2,'0')} • ${status.replace('_',' ')}</div>
        </div>

        <div class="body">
          <h3 class="title">Lesson ${String(lesson.id).padStart(2,'0')}: ${lesson.title}</h3>
          <p class="desc">${lesson.summary}</p>

          <div class="row">
            <div class="chip" aria-live="polite">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              ~${lesson.time} min
            </div>

            <div class="actions">
              <button class="btn small primary" data-start>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M8 5v14l11-7-11-7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
                <span data-start-label>${status==="in_progress"||status==="completed"?"Continue":"Start"}</span>
              </button>
            </div>
          </div>

          <div class="progress-wrap">
            <div class="progress" aria-hidden="true"><i style="width:${progressPct}%"></i></div>
            <label class="sr-only" for="sel-${lesson.id}">Set progress for ${lesson.title}</label>
            <select id="sel-${lesson.id}" class="status-select" data-select>
              <option value="not_started"${status==="not_started"?" selected":""}>Not started</option>
              <option value="in_progress"${status==="in_progress"?" selected":""}>In progress</option>
              <option value="completed"${status==="completed"?" selected":""}>Done</option>
            </select>
          </div>

          ${lesson.id < lessons.length
            ? `<div class="muted" style="font-size:12px">Next: Lesson ${String(lesson.id+1).padStart(2,'0')} — ${lessons[index+1].title}</div>`
            : `<div class="muted" style="font-size:12px">You're at the final lesson.</div>`
          }
        </div>
      `;

      // Wire up actions
      const badge = art.querySelector(".badge");
      const startBtn = $('[data-start]', art);
      const startLabel = $('[data-start-label]', art);
      const select = $('[data-select]', art);
      const progressBar = art.querySelector(".progress > i");

      startBtn.addEventListener('click', () => {
        if (state.status[lesson.id] !== "completed") {
          setStatus(lesson.id, "in_progress");
          badge.textContent = `Lesson ${String(lesson.id).padStart(2,'0')} • in progress`;
          progressBar.style.width = "50%";
          select.value = "in_progress";
          startLabel.textContent = "Continue";
        }
        state.lastLessonId = lesson.id;
        storage.set(state);
        location.hash = `#lesson-${lesson.id}`;
        art.scrollIntoView({ behavior:'smooth', block:'start' });
      });

      select.addEventListener('change', (e) => {
        const newStatus = e.target.value;
        setStatus(lesson.id, newStatus);
        progressBar.style.width = pctFor(newStatus) + "%";
        badge.textContent = `Lesson ${String(lesson.id).padStart(2,'0')} • ${newStatus.replace('_',' ')}`;
        startLabel.textContent = newStatus==="completed" ? "Review" : "Continue";
      });

      return art;
    };

    const render = () => {
      // Ensure logical, numbered order
      lessons.sort((a,b)=> a.id - b.id);
      $("#firstLessonTitle").textContent = `Lesson ${String(lessons[0].id).padStart(2,'0')} — ${lessons[0].title}`;
      grid.innerHTML = "";
      lessons.forEach((l, idx) => grid.appendChild(createCard(l, idx)));
      updateOverall();
    };

    // ---------------- Events ----------------
    $("#startFirst").addEventListener('click', () => {
      const first = lessons[0];
      const el = document.getElementById(`lesson-${first.id}`);
      if (!el) return;
      // Set to in-progress and jump down
      if (state.status[first.id] !== "completed") {
        setStatus(first.id, "in_progress");
      }
      state.lastLessonId = first.id; storage.set(state);
      // Sync the card UI for lesson 1
      const select = el.querySelector("[data-select]");
      const badge  = el.querySelector(".badge");
      const bar    = el.querySelector(".progress > i");
      select.value = state.status[first.id] || "in_progress";
      badge.textContent = `Lesson 01 • ${select.value.replace('_',' ')}`;
      bar.style.width = pctFor(select.value) + "%";
      const startLabel = el.querySelector("[data-start-label]");
      if (startLabel) startLabel.textContent = "Continue";
      el.scrollIntoView({ behavior:'smooth', block:'start' });
    });

    $("#resetBtn").addEventListener('click', () => {
      if (!confirm("Reset all local progress for this course on this device?")) return;
      storage.reset();
      state.status = {};
      state.lastLessonId = null;
      render();
    });

    // ---------------- Init ----------------
    render();
  </script>
</body>
</html>
